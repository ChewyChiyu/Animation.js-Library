function Animate(){this.animateMap=new Map,this.currentAnimationKey=null,this.currentAnimationIndex=null,this.animationLoop=null}function changeAnimationIndex(t){t.currentAnimationIndex<t.animateMap.get(t.currentAnimationKey).texturePosArray.length-1?t.currentAnimationIndex++:t.currentAnimationIndex=0}Animate.prototype={addAnimation:function(t,n,e,i){return null==t||null==n||0>=i||null==e||0==e.length||null!=this.animateMap.get(t)||null==e[0].x||null==e[0].y||null==e[0].w||null==e[0].h?this:(this.animateMap.set(t,{spriteSheet:n,texturePosArray:e,sleepTime:i}),this)},startAnimation:function(t){return null==t||null==this.animateMap.get(t)||this.currentAnimationKey==t?this:(this.currentAnimationKey=t,this.currentAnimationIndex=0,clearInterval(this.animationLoop),this.animationLoop=setInterval(changeAnimationIndex,this.animateMap.get(this.currentAnimationKey).sleepTime,this),this)},drawAnimation:function(t,n,e,i,r){if(null==n||null==e||null==t||null==this.currentAnimationKey)return this;null!=i&&0!=i||(i=1);const a=t.getContext("2d");a.imageSmoothingEnabled=!1;var u=this.animateMap.get(this.currentAnimationKey);return null==u?this:(r?a.drawImage(u.spriteSheet,u.texturePosArray[this.currentAnimationIndex].x,u.texturePosArray[this.currentAnimationIndex].y,u.texturePosArray[this.currentAnimationIndex].w,u.texturePosArray[this.currentAnimationIndex].h,n,e,u.texturePosArray[this.currentAnimationIndex].w,u.texturePosArray[this.currentAnimationIndex].h):(a.translate(n+u.texturePosArray[this.currentAnimationIndex].w,e),a.scale(-1,1),a.drawImage(u.spriteSheet,u.texturePosArray[this.currentAnimationIndex].x,u.texturePosArray[this.currentAnimationIndex].y,u.texturePosArray[this.currentAnimationIndex].w,u.texturePosArray[this.currentAnimationIndex].h,0,0,u.texturePosArray[this.currentAnimationIndex].w*i,u.texturePosArray[this.currentAnimationIndex].h*i),a.setTransform(1,0,0,1,0,0)),this)}};